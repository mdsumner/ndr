% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/open.R
\name{open_dataset}
\alias{open_dataset}
\title{Open a dataset from a file or URL}
\usage{
open_dataset(dsn, vars = NULL, ...)
}
\arguments{
\item{dsn}{Data source name. A file path, URL, or GDAL connection string
(e.g. \code{'ZARR:"/vsicurl/https://example.com/store.parq"'}).}

\item{vars}{Character vector of variable names to include. Default \code{NULL}
includes all data variables. Use \code{character()} for schema + coords only.
All variables are loaded lazily on first access via \code{$}.}

\item{...}{Reserved for future use.}
}
\value{
A \link{Dataset} with coordinates, global attributes, and lazy data
variables that load on first access.
}
\description{
Read a multidimensional data source into an ndr Dataset. Currently supports
any source that GDAL's multidim API can read: NetCDF, HDF5, Zarr v2/v3,
kerchunk-parquet virtual stores, and VRT multidim. Works with local paths,
\verb{/vsicurl/}, \verb{/vsis3/}, and other GDAL virtual filesystems.
}
\details{
Requires the gdalraster package (>= 1.12.0) with multidim API support
(install from: \code{remotes::install_github("mdsumner/gdalraster@gdalmultidim-api")}).
\subsection{Lazy loading}{

\code{open_dataset()} reads only coordinates and metadata. Data variables are
loaded on demand when accessed via \code{ds$var_name}, then cached for reuse.
This allows opening large datasets (e.g. 12TB BRAN2023) without reading
any array data. Use \code{vars} to limit which variables are available.
}

\subsection{Variable classification}{

Arrays are classified as coordinates or data variables based on CF
conventions: a 1D array whose name matches its dimension name is treated
as a coordinate. All other arrays with >1 dimension are data variables.
Bounds arrays (e.g. \code{time_bnds}) and scalar arrays are skipped.
}

\subsection{Coordinate types}{

Regular spatial grids (equal spacing within floating-point tolerance) are
stored as \link{ImplicitCoord} (offset + step, no data allocation). Irregular
grids and time coordinates are stored as \link{ExplicitCoord}.
}

\subsection{CF time decoding}{

Time dimensions (GDAL type "TEMPORAL") are automatically decoded from
their CF units (e.g. "days since 1800-01-01") to R Date or POSIXct values
using \code{\link[=cf_decode_time]{cf_decode_time()}}.
}

\subsection{Dimension ordering}{

Arrays are stored in R's column-major (Fortran) order, matching gdalraster's
\verb{$gis$dim} convention. Dimension names follow the same order. For a NetCDF
variable with dimensions (time, lat, lon), the R array has
\code{dim = c(nlon, nlat, ntime)} and \code{dims = c("lon", "lat", "time")}.
}
}
\examples{
\dontrun{
# Open lazily — no data read yet
ds <- open_dataset("sst.mnmean.nc")
ds  # shows variables with [not loaded]

# Access triggers read
ds$sst |> sel(time = as.Date("2020-06-15"), lat = c(-60, -30))

# Scope to specific variables (still lazy)
ds <- open_dataset("sst.mnmean.nc", vars = "sst")

# Remote kerchunk-parquet — only sst schema, 12TB never touched
dsn <- 'ZARR:"/vsicurl/https://example.com/store.parq"'
ds <- open_dataset(dsn, vars = "temp")
ds$temp  # reads only temp, on demand
}

}
